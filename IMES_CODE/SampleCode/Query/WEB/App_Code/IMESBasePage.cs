using System;
using System.Data;
using System.Configuration;
using System.Linq;
using System.Web;
using System.Web.Security;
using System.Web.UI;
using System.Web.UI.HtmlControls;
using System.Web.UI.WebControls;
using System.Web.UI.WebControls.WebParts;
using System.Xml.Linq;
using com.inventec.RBPC.Net.entity;
using com.inventec.RBPC.Net.intf;
using com.inventec.RBPC.Net.datamodel.intf;

namespace com.inventec.iMESWEB
{

    /// <summary>
    /// Summary description for IMESBasePage
    /// </summary>
    public class IMESBasePage : System.Web.UI.Page
    {
        public IMESBasePage()
        {
            //
            // TODO: Add constructor logic here
            //
        }

        public bool ValidatePrivilege(string pageSymbol)
        {
            //IToken MyToken = (IToken)HttpContext.Current.Session["TOKEN"];
            //IPermissionManager MyPermissionManager = RBPCAgent.getRBPCManager<IPermissionManager>();

            //ISecurityManager MySecurityManager = RBPCAgent.getRBPCManager<ISecurityManager>();
            //IAccountManager MyAccountManager = RBPCAgent.getRBPCManager<IAccountManager>();
            //AccountInfo MyAccout = MySecurityManager.getAccountByToken(MyToken);
            //RoleInfo[] MyRole = MyAccountManager.getRoles("IMES", MyAccout.Login);
            //if (MyRole == null)
            //{
            //    throw new Exception();
            //}

            //PermissionInfo[] permissions = MyPermissionManager.getPermissions(MyRole[0].Id);

            //if (permissions == null)
            //{
            //    throw new Exception();
            //}

            //for (int i = 0; i < permissions.Length; i++)
            //{
            //    if (permissions[i].Target.Symbol == "")
            //    {
            //        return true;
            //    }
            //}

            //System.Web.HttpContext.Current.Response.Redirect("NoPrivilegePage");
            return false;
        }
    }
}